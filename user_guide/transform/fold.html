

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Fold Transform &mdash; Altair 4.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/altair-plot.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/altair-gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Impute Transform" href="impute.html" />
    <link rel="prev" title="Flatten Transform" href="flatten.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Altair
          

          
            
            <img src="../../_static/altair-logo-light.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                4.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/installation.html#dependencies">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/installation.html#development-install">Development Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/starting.html">Basic Statistical Visualization</a></li>
</ul>
<p class="caption"><span class="caption-text">Gallery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gallery/index.html">Example Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../data.html">Specifying Data in Altair</a></li>
<li class="toctree-l1"><a class="reference internal" href="../encoding.html">Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../marks.html">Marks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Data Transformations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aggregate.html">Aggregate Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="bin.html">Bin transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="calculate.html">Calculate Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="density.html">Density Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="filter.html">Filter Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="flatten.html">Flatten Transform</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Fold Transform</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#transform-options">Transform Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="impute.html">Impute Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="joinaggregate.html">Join Aggregate Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="lookup.html">Lookup Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="loess.html">LOESS Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="pivot.html">Pivot Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="quantile.html">Quantile Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="regression.html">Regression Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample.html">Sample Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="stack.html">Stack Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="timeunit.html">TimeUnit Transform</a></li>
<li class="toctree-l2"><a class="reference internal" href="window.html">Window Transform</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../interactions.html">Bindings, Selections, Conditions: Making Charts Interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Top-Level Chart Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compound_charts.html">Compound Charts: Layer, HConcat, VConcat, Repeat, Facet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scale_resolve.html">Scale and Guide Resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../saving_charts.html">Saving Altair Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization.html">Customizing Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../times_and_dates.html">Times and Dates in Altair</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Display Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals.html">Altair Internals: Understanding the Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystem.html">Altair Ecosystem</a></li>
</ul>
<p class="caption"><span class="caption-text">Case Studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../case_studies/exploring-weather.html">Exploring Seattle Weather</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../importing.html">Importing Vega &amp; Vega-Lite Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../display_frontends.html">Displaying Altair Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../display_frontends.html#renderer-api">Renderer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../custom_renderers.html">Customizing Renderers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_transformers.html">Data transformers</a></li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/changes.html">Altair Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Altair</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Data Transformations</a> &raquo;</li>
        
      <li>Fold Transform</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user_guide/transform/fold.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fold-transform">
<span id="user-guide-fold-transform"></span><h1>Fold Transform<a class="headerlink" href="#fold-transform" title="Permalink to this headline">¶</a></h1>
<p>The fold transform is, in short, a way to convert wide-form data to long-form
data directly without any preprocessing (see <a class="reference internal" href="../data.html#data-long-vs-wide"><span class="std std-ref">Long-form vs. Wide-form Data</span></a> for more
information). Fold transforms are the opposite of the <a class="reference internal" href="pivot.html#user-guide-pivot-transform"><span class="std std-ref">Pivot Transform</span></a>.</p>
<p>So, for example, if your data consist of multiple columns that record parallel
data for different categories, you can use the fold transform to encode based
on those categories:</p>
<div class="highlight-python" id="fold-rst-altair-source-0"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>

<span class="n">rand</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">30</span><span class="p">),</span>
    <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">rand</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span>
    <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="n">rand</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span>
    <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="n">rand</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span>
<span class="p">})</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">transform_fold</span><span class="p">(</span>
    <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span>
<span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;date:T&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;value:Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s1">&#39;key:N&#39;</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="fold-rst-altair-plot-0">
<script>
  // embed when document is loaded, to ensure vega library is available
  // this works on all modern browsers, except IE8 and older
  document.addEventListener("DOMContentLoaded", function(event) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-323bee835559f9f913139f56468205ce"}, "mark": "line", "encoding": {"color": {"type": "nominal", "field": "key"}, "x": {"type": "temporal", "field": "date"}, "y": {"type": "quantitative", "field": "value"}}, "transform": [{"fold": ["A", "B", "C"]}], "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-323bee835559f9f913139f56468205ce": [{"date": "2019-01-01T00:00:00", "A": 1.764052345967664, "B": 0.1549474256969163, "C": -0.672460447775951}, {"date": "2019-01-02T00:00:00", "A": 2.1642095543348874, "B": 0.5331099452990898, "C": -1.0320136093164924}, {"date": "2019-01-03T00:00:00", "A": 3.1429475384406267, "B": -0.3546758023310229, "C": -1.8451598913609466}, {"date": "2019-01-04T00:00:00", "A": 5.3838407376420845, "B": -2.3354722705549498, "C": -3.5714424936926235}, {"date": "2019-01-05T00:00:00", "A": 7.251398727792052, "B": -2.6833844198811025, "C": -3.3940163514388706}, {"date": "2019-01-06T00:00:00", "A": 6.274120847915642, "B": -2.5270354507771224, "C": -3.7957972876471326}, {"date": "2019-01-07T00:00:00", "A": 7.224209265441231, "B": -1.2967447700494017, "C": -5.4259956346131775}, {"date": "2019-01-08T00:00:00", "A": 7.072852057143533, "B": -0.09436492126499041, "C": -4.963213379087403}, {"date": "2019-01-09T00:00:00", "A": 6.969633205349975, "B": -0.4816917386729427, "C": -5.8705117434706455}, {"date": "2019-01-10T00:00:00", "A": 7.380231707288347, "B": -0.7839944892482782, "C": -5.818566347674507}, {"date": "2019-01-11T00:00:00", "A": 7.524275278449225, "B": -1.8325474543153708, "C": -5.08947578549697}, {"date": "2019-01-12T00:00:00", "A": 8.9785487854122, "B": -3.252565391494346, "C": -4.960492874739559}, {"date": "2019-01-13T00:00:00", "A": 9.739586510559192, "B": -4.958835582119359, "C": -3.821092190196259}, {"date": "2019-01-14T00:00:00", "A": 9.86126152705202, "B": -3.008060186887569, "C": -5.055918010549911}, {"date": "2019-01-15T00:00:00", "A": 10.305124759797446, "B": -3.5177123686392227, "C": -4.653576369372362}, {"date": "2019-01-16T00:00:00", "A": 10.638799087171712, "B": -3.955786670250409, "C": -5.338386460312675}, {"date": "2019-01-17T00:00:00", "A": 12.132878160329318, "B": -5.208582030300335, "C": -6.2091836094945565}, {"date": "2019-01-18T00:00:00", "A": 11.927719896563516, "B": -4.4310916744684254, "C": -6.7880332742589715}, {"date": "2019-01-19T00:00:00", "A": 12.240787598214418, "B": -6.044989522026377, "C": -7.099585806386344}, {"date": "2019-01-20T00:00:00", "A": 11.386691858912693, "B": -6.257729802240346, "C": -7.043420464156599}, {"date": "2019-01-21T00:00:00", "A": 8.833702043078613, "B": -7.153196363434021, "C": -8.208570304939956}, {"date": "2019-01-22T00:00:00", "A": 9.487320638518973, "B": -6.766293865574759, "C": -7.307743817985768}, {"date": "2019-01-23T00:00:00", "A": 10.35175683737848, "B": -7.277099003143632, "C": -6.842081378255308}, {"date": "2019-01-24T00:00:00", "A": 9.609591816972037, "B": -8.457731187266043, "C": -8.378325064532532}, {"date": "2019-01-25T00:00:00", "A": 11.879346440959644, "B": -8.4859134156047, "C": -6.890072870736933}, {"date": "2019-01-26T00:00:00", "A": 10.424980766360878, "B": -8.057581545074282, "C": -4.99418369470635}, {"date": "2019-01-27T00:00:00", "A": 10.470739283662324, "B": -7.9910643226911136, "C": -3.815404123546699}, {"date": "2019-01-28T00:00:00", "A": 10.28355543363649, "B": -7.688592424951332, "C": -3.99532895935905}, {"date": "2019-01-29T00:00:00", "A": 11.816334647994948, "B": -8.322914518632295, "C": -5.066081580869593}, {"date": "2019-01-30T00:00:00", "A": 13.285693417895233, "B": -8.685655684619434, "C": -4.011629853938456}]}};
      var opt = {
        "mode": "vega-lite",
        "renderer": "canvas",
        "actions": {"editor": true, "source": true, "export": true}
      };
      vegaEmbed('#fold-rst-altair-plot-0', spec, opt).catch(console.err);
  });
</script>
</div><p>Notice here that the fold transform essentially stacks all the values
from the specified columns into a single new field named <code class="docutils literal"><span class="pre">&quot;value&quot;</span></code>,
with the associated names in a field named <code class="docutils literal"><span class="pre">&quot;key&quot;</span></code>.</p>
<p>For an example of the fold transform in action, see <a class="reference internal" href="../../gallery/parallel_coordinates.html#gallery-parallel-coordinates"><span class="std std-ref">Parallel Coordinates Example</span></a>.</p>
<div class="section" id="transform-options">
<h2>Transform Options<a class="headerlink" href="#transform-options" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../generated/toplevel/altair.Chart.html#altair.Chart.transform_fold" title="altair.Chart.transform_fold"><code class="xref py py-meth docutils literal"><span class="pre">transform_fold()</span></code></a> method is built on the <a class="reference internal" href="../generated/core/altair.FoldTransform.html#altair.FoldTransform" title="altair.FoldTransform"><code class="xref py py-class docutils literal"><span class="pre">FoldTransform</span></code></a>
class, which has the following options:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="25%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="vl-prop">as</td>
<td>array(any)</td>
<td class="vl-decsr">The output field names for the key and value properties produced by the fold transform.
<strong>Default value:</strong> <code class="docutils literal"><span class="pre">[&quot;key&quot;,</span> <span class="pre">&quot;value&quot;]</span></code></td>
</tr>
<tr class="row-odd"><td class="vl-prop">fold</td>
<td>array(<a class="reference internal" href="../generated/core/altair.FieldName.html#altair.FieldName" title="altair.FieldName"><code class="xref py py-class docutils literal"><span class="pre">FieldName</span></code></a>)</td>
<td class="vl-decsr">An array of data fields indicating the properties to fold.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="impute.html" class="btn btn-neutral float-right" title="Impute Transform" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flatten.html" class="btn btn-neutral" title="Flatten Transform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019, Altair Developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'4.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@4.8.1"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>